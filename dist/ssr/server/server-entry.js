import{defineComponent as k,ref as $,onMounted as G,nextTick as L,useSSRContext as z,resolveComponent as q,withCtx as N,createVNode as Q,markRaw as T,createApp as V}from"vue";import{Notify as R,Quasar as B,Dialog as D,Dark as H,Loading as W,Meta as Z}from"quasar";import{ssrRenderAttrs as M,ssrRenderSlot as X,ssrRenderComponent as S}from"vue/server-renderer";import{createPinia as Y,defineStore as j}from"pinia";import{createRouter as K,createMemoryHistory as x}from"vue-router";import{createClient as ee}from"@supabase/supabase-js";const w=k({__name:"LoadingGlobal",__ssrInlineRender:!0,setup(e){const r=$(!0);return G(async()=>{await L(),r.value=!1}),(t,n,o,i)=>{r.value?n(`<div${M(i)}></div>`):(n(`<div${M(i)}>`),X(t.$slots,"default",{},null,n,o),n("</div>"))}}}),U=w.setup;w.setup=(e,r)=>{const t=z();return(t.modules||(t.modules=new Set)).add("src/views/components/LoadingGlobal.vue"),U?U(e,r):void 0};const u=k({__name:"App",__ssrInlineRender:!0,setup(e){return(r,t,n,o)=>{const i=q("router-view");t(S(w,o,{default:N((p,h,l,m)=>{if(h)h(S(i,null,null,l,m));else return[Q(i)]}),_:1},n))}}}),F=u.setup;u.setup=(e,r)=>{const t=z();return(t.modules||(t.modules=new Set)).add("src/views/App.vue"),F?F(e,r):void 0};const I=e=>e,Re=I,te=I,re=I,g=re(()=>Y()),ne="https://xryaclyxljarvrhneras.supabase.co",oe="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhyeWFjbHl4bGphcnZyaG5lcmFzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY1MjkzMDMsImV4cCI6MjA1MjEwNTMwM30.7RWlQ5T--T8A5RW1cfzmm5V6Mp2FEfaez8CCGoki8Bo",f=ee(ne,oe),d={error:e=>R.create({message:e.message,position:"top-right",type:"negative"}),success:e=>R.create({type:"positive",message:e.message,onDismiss:()=>e.ok&&e.ok()})},O=j("authStore",{state:()=>({lifecycles:{onMounted:!1},current:null,data:null}),actions:{signUp(e,r){f.auth.signUp({email:e.email,password:e.password,options:{data:{fullname:e.fullname,birthdate:e.birthdate}}}).then(({data:t,error:n})=>{if(n)return d.error(n);r&&r(t.user)})},signIn(e,r){f.auth.signInWithPassword(e).then(({data:t,error:n})=>{if(n)return d.error(n);r&&r(t.user)})},signOut(e){f.auth.signOut().then(({error:r})=>{if(r)return d.error(r);e&&e(null)})},getUser(e,r=!1){(!this.lifecycles.onMounted||r)&&(this.lifecycles.onMounted=!0,f.auth.getUser().then(({data:t,error:n})=>{if(n)return e&&e(null),"Not Authenticated User";e&&e(t.user),this.current=t.user}))},updateUser(e,r){f.auth.updateUser(e).then(({data:t,error:n})=>{if(n)return d.error(n);r&&r(t),setTimeout(()=>this.current=t.user,200)})},reset(){this.lifecycles.onMounted=!1,this.current=null,this.data=null}}}),b=(e,r,t)=>{const n=e.meta.auth;O().getUser(i=>{n?i?t():t({name:"login"}):i?t({name:"home"}):t()},!0)},se=(e,r,t)=>{O().getUser(),t()},ie=()=>({path:"/dashboard",component:()=>import("./assets/MainLayout-DZGY41jF.js"),beforeEnter:[b],meta:{auth:!0},children:[{path:"",name:"panel",component:()=>import("./assets/PanelPage-BH0A6CW9.js")},{path:"perfil",name:"profile",component:()=>import("./assets/ProfilePage-CysWdnRn.js")},{path:"soporte",name:"support",component:()=>import("./assets/SupportPage-CnQk617C.js")},{path:"pagos",name:"pay",component:()=>import("./assets/PayPage-C0awPQFd.js")}]}),ae=()=>({path:"/:catchAll(.*)*",component:()=>import("./assets/ErrorNotFound-BtQ4KmT7.js")}),ue=()=>[{path:"inicio-sesion",name:"login",beforeEnter:[b],meta:{auth:!1},component:()=>import("./assets/LoginPage-BguYk7dH.js")},{path:"registro",name:"register",beforeEnter:[b],meta:{auth:!1},component:()=>import("./assets/RegisterPage-CzYjiG1J.js")}],ce=[{path:"/",component:()=>import("./assets/PublicLayout-CZSFFOo4.js"),children:[{path:"",name:"init",beforeEnter:[se],component:()=>import("./assets/InitPage-BHrRGkcD.js")},...ue()]},ie(),ae()],v=te(function(){return K({scrollBehavior:()=>({left:0,top:0}),routes:ce,history:x("/")})});async function pe(e,r,t){const n=e(u);n.use(B,r,t);const o=typeof g=="function"?await g({ssrContext:t}):g;n.use(o);const i=T(typeof v=="function"?await v({ssrContext:t,store:o}):v);return o.use(({store:p})=>{p.router=i}),{app:n,store:o,router:i}}const le={config:{},plugins:{Notify:R,Dialog:D,Dark:H,Loading:W,Meta:Z}},A=typeof u.preFetch=="function"?u.preFetch:u.__c!==void 0&&typeof u.__c.preFetch=="function"?u.__c.preFetch:!1,P="/",fe=/^https?:\/\//;function C(e,r){if(typeof e=="string"&&fe.test(e)===!0)return e;try{return r.resolve(e).href}catch{}return e}const{components:be,directives:we,...he}=le;let y=null,E=Promise.allSettled([import("./assets/langs-BZrcPATC.js"),import("./assets/axios-BE7k0yn3.js")]).then(e=>e.map(r=>{if(r.status==="rejected"){console.error("[Quasar] boot error:",r.reason);return}return r.value.default})).then(e=>e.filter(r=>typeof r=="function"));const Ie=e=>new Promise(async(r,t)=>{y===null&&(y=await E,E=null);const{app:n,router:o,store:i}=await pe(V,he,e);let p=!1;const h=(a,c)=>{p=!0,t({url:C(a,o),code:c})};for(let a=0;p===!1&&a<y.length;a++)try{await y[a]({app:n,router:o,store:i,ssrContext:e,redirect:h,urlPath:e.req.url,publicPath:P})}catch(c){t(c);return}if(p===!0)return;n.use(o);const l=e.req.url,{fullPath:m}=o.resolve(l);if(m!==l)return t({url:m});o.push(l).catch(()=>{}),o.isReady().then(()=>{let a=o.currentRoute.value.matched.filter(s=>s.components!==void 0).flatMap(s=>Object.values(s.components));if(a.length===0)return t({code:404});let c=!1;const J=(s,_)=>{c=!0,t({url:C(s,o),code:_})};a=a.filter(s=>typeof s.preFetch=="function"||s.__c!==void 0&&typeof s.__c.preFetch=="function").map(s=>s.__c!==void 0?s.__c.preFetch:s.preFetch),A!==!1&&a.unshift(A),a.reduce((s,_)=>s.then(()=>c===!1&&_({store:i,ssrContext:e,currentRoute:o.currentRoute.value,redirect:J,urlPath:e.req.url,publicPath:P})),Promise.resolve()).then(()=>{c!==!0&&r(n)}).catch(t)}).catch(t)});export{Re as d,Ie as default,O as u};
